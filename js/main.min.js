toggled=new Array();$(document).ready(function(){libs=$(".library");for(i=0;i<libs.length;i++){libs[i].id=i.toString()}libs.click(function(a){if(toggled[this.id]){this.querySelector(".l-settings").style.transform="";this.nextElementSibling.style.height="0px"}else{this.querySelector(".l-settings").style.transform="rotate(180deg)";content=this.nextElementSibling;content.style.height="";height=content.clientHeight;content.style.height="0px";setTimeout(function(){content.style.height=height.toString()+"px"},10)}toggled[this.id]=!toggled[this.id]});$(".l-drop").click(function(a){openOptions(this.parentElement.id);a.stopPropagation()});$(".h-more").click(function(a){openOptions(this.parentElement.id);a.stopPropagation()});$("#imp-bg-fade").click(function(){$(".l-sett-opt").css({opacity:"0",right:"50px"});$("#imp-message, #imp-bg-fade").css("opacity","0");setTimeout(function(){$("#imp-message, #imp-bg-fade, .l-sett-opt").css("display","none")},100);closeSettings();closeTagSearch();closeStats();closeAddLib();closeAccount();closePost()});$(".openSettings").click(function(){openSettings();$("#imp-bg-fade").css("opacity","")});$(".closeSettings").click(function(){closeSettings();$("#imp-message, #imp-bg-fade").css("opacity","0")});$(".openTagSearch").click(function(){openTagSearch();$("#imp-bg-fade").css("opacity","")});$(".closeTagSearch").click(function(){closeTagSearch();$("#imp-message, #imp-bg-fade").css("opacity","0")});$(".openStats").click(function(){openStats();$("#imp-bg-fade").css("opacity","")});$(".closeStats").click(function(){closeStats();$("#imp-message, #imp-bg-fade").css("opacity","0")});$(".openAddLib").click(function(){openAddLib();$("#imp-bg-fade").css("opacity","")});$(".closeAddLib").click(function(){closeAddLib();$("#imp-message, #imp-bg-fade").css("opacity","0")});$(".openAccount").click(function(){openAccount();$("#imp-bg-fade").css("opacity","")});$(".closeAccount").click(function(){closeAccount();$("#imp-message, #imp-bg-fade").css("opacity","0")});$(".openPost").click(function(){openPost();$("#imp-bg-fade").css("opacity","")});$(".closePost").click(function(){closePost();$("#imp-message, #imp-bg-fade").css("opacity","0")});$(".s-tab").click(function(){if(!(this.classList.contains("s-selected"))){$(".s-tab").toggleClass("s-selected");$(".s-c-wrapper").toggleClass("s-slide")}});$(".t-cross").click(function(){})});function sendCommand(a,f,d,g){var c="";for(var b in d){if(d.hasOwnProperty(b)){c+=b+"="+d[b]+"&"}}c+="session="+f;var e=new XMLHttpRequest();e.onreadystatechange=function(){if(this.readyState==4&&this.status==200){g(JSON.parse(this.responseText))}};e.open("POST","/api/"+a,true);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");e.send(c)}function followAction(){var d=document.cookie.split("; ");var c=null;for(i=0;i<d.length;i++){var b=d[i];if(b.startsWith("PHPSESSID")){c=b.split("=")[1];break}}var a=document.getElementById("follow-btn");if(a.className=="follow"||a.className=="unfollow"){sendCommand(a.className,c,{handle:a.dataset.handle},function(e){if(e.following){a.className="unfollow"}else{a.className="follow"}a.innerHTML="<span>"+e.followers+"</span>"})}}function openOptions(b){console.log(b);var a=$("#"+b).offset();$(".l-sett-opt").css({top:(a.top+15)+"px",opacity:"0",right:"50px",display:""});$("#imp-bg-fade").css("display","");setTimeout(function(){$(".l-sett-opt").css({opacity:"",right:""});$("#imp-bg-fade").css("opacity","")},10)}function showError(a){elmt=$("#imp-bg-fade, #imp-message");elmt.css("display","");setTimeout(function(){elmt.css("opacity","")},10);$("#imp-message .imp-p").text(a)}function openSettings(){$(".s-settings").css({display:"table"});$("#imp-bg-fade").css("display","");setTimeout(function(){$(".l-sett-opt").css({opacity:"",right:""});$("#imp-bg-fade").css("opacity","")},10)}function closeSettings(){$(".s-settings").css({display:"none"});$("#imp-bg-fade").css("display","none")}function openTagSearch(){$(".tagFinder").css({display:"block"});$("#imp-bg-fade").css("display","");setTimeout(function(){$(".l-sett-opt").css({opacity:"",right:""});$("#imp-bg-fade").css("opacity","")},10)}function closeTagSearch(){$(".tagFinder").css({display:"none"});$("#imp-bg-fade").css("display","none")}function openStats(){$(".stats").css({display:"block"});$("#imp-bg-fade").css("display","");setTimeout(function(){$(".l-sett-opt").css({opacity:"",right:""});$("#imp-bg-fade").css("opacity","")},10)}function closeStats(){$(".stats").css({display:"none"});$("#imp-bg-fade").css("display","none")}function openAddLib(){$(".addLib").css({display:"block"});$("#imp-bg-fade").css("display","");setTimeout(function(){$(".l-sett-opt").css({opacity:"",right:""});$("#imp-bg-fade").css("opacity","")},10)}function closeAddLib(){$(".addLib").css({display:"none"});$("#imp-bg-fade").css("display","none")}function openAccount(){$(".s-dropdown").css({display:"block"});$("#imp-bg-fade").css("display","");setTimeout(function(){$(".l-sett-opt").css({opacity:"",right:""});$("#imp-bg-fade").css("opacity","")},10)}function closeAccount(){$(".s-dropdown").css({display:"none"});$("#imp-bg-fade").css("display","none")}function openPost(){window.scrollTo(0,0);$(".m-post").css({display:"block"});$("#imp-bg-fade").css("display","");setTimeout(function(){$(".l-sett-opt").css({opacity:"",right:""});$("#imp-bg-fade").css("opacity","")},10)}function closePost(){$(".m-post").css({display:"none"});$("#imp-bg-fade").css("display","none")};