var $jscomp={scope:{},checkStringArgs:function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""}};
$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,e){if(b){c=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var f=a[e];f in c||(c[f]={});c=c[f]}a=a[a.length-1];e=c[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";for(var f=b.length,g=a.length,d=Math.max(0,Math.min(c|0,b.length)),h=0;h<g&&d<f;)if(b[d++]!=a[h++])return!1;return h>=g}},"es6-impl","es3");toggled=[];searchCode="";
$(document).ready(function(){libs=$(".library");for(i=0;i<libs.length;i++)libs[i].id=i.toString();libs.click(function(a){toggled[this.id]?(this.querySelector(".l-settings").style.transform="",this.nextElementSibling.style.height="0px"):(this.querySelector(".l-settings").style.transform="rotate(180deg)",content=this.nextElementSibling,content.style.height="",height=content.clientHeight,content.style.height="0px",setTimeout(function(){content.style.height=height.toString()+"px"},10));toggled[this.id]=
!toggled[this.id]});$(".l-drop").click(function(a){openOptions(this.parentElement.id);a.stopPropagation()});$(".h-more").click(function(a){openOptions(this.parentElement.id);a.stopPropagation()});$("#imp-bg-fade").click(function(){$(".l-sett-opt").css({opacity:"0",right:"50px"});$("#imp-message, #imp-bg-fade").css("opacity","0");setTimeout(function(){$("#imp-message, #imp-bg-fade, .l-sett-opt").css("display","none")},100);closeSettings();closeTagSearch();closeStats();closeAddLib();closeAccount();
closePost();closeBalance()});$(".openSettings").click(function(){openSettings();$("#imp-bg-fade").css("opacity","")});$(".closeSettings").click(function(){closeSettings();$("#imp-message, #imp-bg-fade").css("opacity","0")});$(".openTagSearch").click(function(){openTagSearch();tagSearch("");$("#imp-bg-fade").css("opacity","")});$(".closeTagSearch").click(function(){closeTagSearch();$("#imp-message, #imp-bg-fade").css("opacity","0")});$(".openStats").click(function(){openStats();$("#imp-bg-fade").css("opacity",
"")});$(".closeStats").click(function(){closeStats();$("#imp-message, #imp-bg-fade").css("opacity","0")});$(".openAddLib").click(function(){openAddLib();$("#imp-bg-fade").css("opacity","")});$(".closeAddLib").click(function(){closeAddLib();$("#imp-message, #imp-bg-fade").css("opacity","0")});$(".openAccount").click(function(){openAccount();$("#imp-bg-fade").css("opacity","")});$(".closeAccount").click(function(){closeAccount();$("#imp-message, #imp-bg-fade").css("opacity","0")});$(".openPost").click(function(){openPost();
$("#imp-bg-fade").css("opacity","")});$(".closePost").click(function(){closePost();$("#imp-message, #imp-bg-fade").css("opacity","0")});$(".openBalance").click(function(){openBalance();$("#imp-bg-fade").css("opacity","")});$(".closeBalance").click(function(){closeBalance();$("#imp-message, #imp-bg-fade").css("opacity","0")});$(".openEcSearch").click(function(){openBalance();$("#imp-bg-fade").css("opacity","")});$(".closeEcSearch").click(function(){closeBalance();$("#imp-message, #imp-bg-fade").css("opacity",
"0")});$(".s-tab").click(function(){this.classList.contains("s-selected")||($(".s-tab").toggleClass("s-selected"),$(".s-c-wrapper").toggleClass("s-slide"))});$(".t-cross").click(function(){var a=this.parentElement;sendCommand("delete_favorite",null,{type:this.dataset.type},function(b){a.parentNode.removeChild(a)})});$(".c-title-holder .searchbar input").keyup(function(){tagSearch(this.value)})});
function tagSearch(a){searchCode=uuid();sendCommand("search_tag",null,{code:searchCode,q:a},function(a){console.log(a);if(searchCode==a.code){$(".c-b-wrapper").text("");for(var b=0;b<a.results;b++){var e=a.tags[b];$(".c-b-wrapper").append('<div class="c-result" onclick="addTag(\''+e+'\')"><h1 class="c-r-title">'+e+'</h1><div class="type c">+</div></div>')}}})}function addTag(a){sendCommand("add_favorite",null,{type:a},function(a){console.log(a.favorites)})}
function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})}
function sendCommand(a,b,c,e){if(null==b){var f=document.cookie.split("; ");for(i=0;i<f.length;i++){var g=f[i];if(g.startsWith("PHPSESSID")){b=g.split("=")[1];break}}}var f="",d;for(d in c)c.hasOwnProperty(d)&&(f+=d+"="+c[d]+"&");f+="session="+b;b=new XMLHttpRequest;b.onreadystatechange=function(){4==this.readyState&&200==this.status&&(response=JSON.parse(this.responseText),"success"==response.status&&e(response))};b.open("POST","/api/"+a,!0);b.setRequestHeader("Content-type","application/x-www-form-urlencoded");
b.send(f)}function uploadFile(a,b,c,e,f,g){if(null==b){var d=document.cookie.split("; ");for(i=0;i<d.length;i++){var h=d[i];if(h.startsWith("PHPSESSID")){b=h.split("=")[1];break}}}d=new FormData;d.append("file",a);d.append("type",c);d.append("parent",e);d.append("library",f);d.append("session",b);$.ajax({type:"POST",url:"/api/create_post",contentType:!1,processData:!1,data:d,success:function(a){a=JSON.parse(a);"success"==a.status&&g(a)}})}
function followAction(){var a=document.getElementById("follow-btn");"follow"!=a.className&&"unfollow"!=a.className||sendCommand(a.className,null,{handle:a.dataset.handle},function(b){a.className=b.following?"unfollow":"follow";a.innerHTML="<span>"+b.followers+"</span>"})}
function openOptions(a){console.log(a);a=$("#"+a).offset();$(".l-sett-opt").css({top:a.top+15+"px",opacity:"0",right:"50px",display:""});$("#imp-bg-fade").css("display","");setTimeout(function(){$(".l-sett-opt").css({opacity:"",right:""});$("#imp-bg-fade").css("opacity","")},10)}function showError(a){elmt=$("#imp-bg-fade, #imp-message");elmt.css("display","");setTimeout(function(){elmt.css("opacity","")},10);$("#imp-message .imp-p").text(a)}
function openSettings(){$(".s-settings").css({display:"table"});$("#imp-bg-fade").css("display","");setTimeout(function(){$(".l-sett-opt").css({opacity:"",right:""});$("#imp-bg-fade").css("opacity","")},10)}function closeSettings(){$(".s-settings").css({display:"none"});$("#imp-bg-fade").css("display","none")}
function openTagSearch(){$(".tagFinder").css({display:"block"});$("#imp-bg-fade").css("display","");setTimeout(function(){$(".l-sett-opt").css({opacity:"",right:""});$("#imp-bg-fade").css("opacity","")},10)}function closeTagSearch(){$(".tagFinder").css({display:"none"});$("#imp-bg-fade").css("display","none")}
function openStats(){$(".stats").css({display:"block"});$("#imp-bg-fade").css("display","");setTimeout(function(){$(".l-sett-opt").css({opacity:"",right:""});$("#imp-bg-fade").css("opacity","")},10)}function closeStats(){$(".stats").css({display:"none"});$("#imp-bg-fade").css("display","none")}function openAddLib(){$(".addLib").css({display:"block"});$("#imp-bg-fade").css("display","");setTimeout(function(){$(".l-sett-opt").css({opacity:"",right:""});$("#imp-bg-fade").css("opacity","")},10)}
function closeAddLib(){$(".addLib").css({display:"none"});$("#imp-bg-fade").css("display","none")}function openAccount(){$(".s-dropdown").css({display:"block"});$("#imp-bg-fade").css("display","");setTimeout(function(){$(".l-sett-opt").css({opacity:"",right:""});$("#imp-bg-fade").css("opacity","")},10);$(".peep").children().css("filter","blur(5px)");$(".s-dropdown").css("filter","blur(0px)");$(".peep").css("background","#222")}
function closeAccount(){$(".s-dropdown").css({display:"none"});$("#imp-bg-fade").css("display","none");$(".peep").children().css("filter","blur(0px)");$(".peep").css("background","#fff")}function openPost(){window.scrollTo(0,0);$(".m-post").css({display:"block"});$("#imp-bg-fade").css("display","");setTimeout(function(){$(".l-sett-opt").css({opacity:"",right:""});$("#imp-bg-fade").css("opacity","")},10)}
function closePost(){$(".m-post").css({display:"none"});$("#imp-bg-fade").css("display","none")}function openBalance(){$(".balance-message").css({display:"block"});$("#imp-bg-fade").css("display","");setTimeout(function(){$(".l-sett-opt").css({opacity:"",right:""});$("#imp-bg-fade").css("opacity","")},10);$(".peep").children().css("filter","blur(5px)");$(".balance-message").css("filter","blur(0px)");$(".peep").css("background","#222")}
function closeBalance(){$(".balance-message").css({display:"none"});$("#imp-bg-fade").css("display","none");$(".peep").children().css("filter","blur(0px)");$(".peep").css("background","#fff")}function removeDragData(a){console.log("Removing drag data");a.dataTransfer.items?a.dataTransfer.items.clear():a.dataTransfer.clearData()}
function libDrop(a){console.log("drop");a.preventDefault();var b=a.dataTransfer.items[i].getAsFile(),c=b.name.split(".");uploadFile(b,null,c[c.length-1],-1,-1,function(a){console.log(a)});removeDragData(a)}function libDrag(a){console.log("drag");a.preventDefault()};
